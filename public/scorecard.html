<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Match Scorecard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    
    .footer {
      text-align: center;
      margin-top: 40px;
      font-size: 0.9rem;
      color: #777;
    }

    body {
      background-color: #f0f8ff;
      font-family: 'Arial', sans-serif;
      padding-top: 70px;
    }
    .container {
      margin-top: 30px;
    }
    h1, h3 {
      color: #007bff;
      text-align: center;
      font-weight: bold;
    }
    .match-details {
      background-color: #ffffff;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 6px 15px rgba(0, 123, 255, 0.1);
      margin-bottom: 30px;
    }
    .btn-primary {
      background-color: #007bff;
      border: none;
      padding: 12px 25px;
      font-size: 18px;
      font-weight: 600;
      border-radius: 30px;
      transition: all 0.3s ease;
    }
    .btn-primary:hover {
      background-color: #0056b3;
      transform: scale(1.05);
    }
    .table thead {
      background-color: #007bff;
      color: white;
      border-radius: 8px;
    }
    .table th, .table td {
      vertical-align: middle;
      text-align: center;
      padding: 12px;
    }
    h5 {
      margin-top: 20px;
      color: #28a745;
      font-weight: 600;
    }
    .table-bordered {
      border: 2px solid #dee2e6;
      border-radius: 10px;
      overflow: hidden;
    }
    .table-bordered th, .table-bordered td {
      border: 1px solid #dee2e6;
    }
    .table tbody tr:hover {
      background-color: #f1f1f1;
      transition: all 0.3s ease;
    }
    .card-header {
      background-color: #007bff;
      color: white;
      font-size: 1.2rem;
      font-weight: 600;
      padding: 10px 15px;
      border-radius: 8px 8px 0 0;
    }
    .card-body {
      padding: 20px;
    }
    /* Enhanced Navbar */
    .navbar {
      background: linear-gradient(90deg, #007bff, #4a90e2);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    .navbar-brand {
      font-size: 1.5rem;
      font-weight: 700;
      color: #fff;
      display: flex;
      align-items: center;
    }
    .navbar-brand img {
      width: 40px;
      height: 40px;
      margin-right: 10px;
    }
    .navbar-nav .nav-link {
      color: #fff;
      font-weight: 600;
      font-size: 1rem;
      margin: 0 10px;
      position: relative;
    }
    .navbar-nav .nav-link::after {
      content: '';
      width: 0;
      height: 2px;
      background: #ffdd57;
      position: absolute;
      bottom: -5px;
      left: 50%;
      transform: translateX(-50%);
      transition: width 0.3s ease-in-out;
    }
    .navbar-nav .nav-link:hover::after,
    .navbar-nav .nav-link.active::after {
      width: 100%;
    }
    .navbar-toggler {
      border: none;
      color: #fff;
    }
  </style>
</head>
<body>
  <!-- Enhanced Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <img src="https://via.placeholder.com/40" alt="Logo">
        Cricket Portal
      </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="index.html"><i class="bi bi-house-fill"></i> Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="head2head.html"><i class="bi bi-arrow-left-right"></i> Head to Head</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="venue.html"><i class="bi bi-geo-alt-fill"></i> Venue</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container">
    <h1 class="my-4">Match Scorecard</h1>
    <div id="match-details" class="match-details"></div>
    <!-- Footer -->
  <div class="footer">
    <p>Â© 2024 Cricket Portal. All rights reserved.</p>
  </div>
  </div>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', async function() {
      const urlParams = new URLSearchParams(window.location.search);
      const matchId = urlParams.get('matchId');
      
      if (!matchId) {
        alert('Match ID is missing.');
        return;
      }

      try {
        const response = await fetch(`/matchDetails?matchId=${matchId}`);
        const match = await response.json();

        if (!match) {
          alert('Match details not found.');
          return;
        }

        const matchDetailsDiv = document.getElementById('match-details');
        matchDetailsDiv.innerHTML = `
          <div class="card mb-4">
            <div class="card-header">
              ${match.matchInfo.team1} vs ${match.matchInfo.team2}
            </div>
            <div class="card-body">
              <p><strong>Match Date:</strong> ${new Date(match.matchInfo.matchDate).toLocaleDateString()}</p>
              <p><strong>Venue:</strong> ${match.matchInfo.venue}</p>
              <p><strong>League:</strong> ${match.matchInfo.league}</p>
              <h4>Scorecard</h4>
              ${generateScorecard(match.scoreCard)}
            </div>
          </div>
        `;
      } catch (error) {
        console.error('Error fetching match details:', error);
        alert('An error occurred while fetching the match details.');
      }
    });

    function generateScorecard(scoreCard) {
      let html = '';

      scoreCard.forEach((innings) => {
        if (innings.innings.includes('Batting')) {
          html += `
            <h5>${innings.innings}</h5>
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Batsman</th>
                  <th>Dismissal</th>
                  <th>Runs</th>
                  <th>Balls</th>
                  <th>Mins</th>
                  <th>4s</th>
                  <th>6s</th>
                  <th>SR</th>
                </tr>
              </thead>
              <tbody>
                ${innings.data.map(player => `
                  <tr>
                    <td>${player.Batsman}</td>
                    <td>${player.Dismissal}</td>
                    <td>${player.R}</td>
                    <td>${player.Balls}</td>
                    <td>${player.Mins}</td>
                    <td>${player['4s']}</td>
                    <td>${player['6s']}</td>
                    <td>${player.SR}</td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          `;
        } else if (innings.innings.includes('Bowling')) {
          html += `
            <h5>${innings.innings}</h5>
            <table class="table table-bordered">
              <thead>
                <tr>
                  <th>Bowler</th>
                  <th>O</th>
                  <th>Md</th>
                  <th>R</th>
                  <th>W</th>
                  <th>Eco</th>
                  <th>Wd</th>
                  <th>Nb</th>
                </tr>
              </thead>
              <tbody>
                ${innings.data.map(bowler => `
                  <tr>
                    <td>${bowler.Bowler}</td>
                    <td>${bowler.O}</td>
                    <td>${bowler.Md}</td>
                    <td>${bowler.R}</td>
                    <td>${bowler.W}</td>
                    <td>${bowler.Eco}</td>
                    <td>${bowler.Wd}</td>
                    <td>${bowler.Nb}</td>
                  </tr>
                `).join('')}
              </tbody>
            </table>
          `;
        }
      });

      return html;
    }
  </script>
</body>
</html>