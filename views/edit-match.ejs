<!DOCTYPE html>
<html lang="en">
  <%- include('partials/admin_header', { activePage: activePage }) %>
  <body>
    <%- include('partials/adm_sdbar', { activePage: activePage }) %>

    <!-- Main Content -->
    <div class="content container-fluid">
      <div class="row justify-content-center">
        <div class="col-12 col-md-8 col-lg-6">
          <h1 class="text-center my-4">Edit Match</h1>
          <div class="form-container p-3 bg-light rounded shadow-sm">
            <form action="/matches/<%= match._id %>" method="POST" class="needs-validation" novalidate>
              <div class="mb-3">
                <label for="team1" class="form-label">Team 1</label>
                <input 
                  type="text" 
                  id="team1" 
                  name="team1" 
                  class="form-control" 
                  placeholder="Enter Team 1 name" 
                  value="<%= match.team1 %>"
                  required 
                />
                <div class="invalid-feedback">Please enter Team 1 name.</div>
              </div>
              <div class="mb-3">
                <label for="team2" class="form-label">Team 2</label>
                <input 
                  type="text" 
                  id="team2" 
                  name="team2" 
                  value="<%= match.team2 %>"
                  class="form-control" 
                  placeholder="Enter Team 2 name" 
                  required 
                />
                <div class="invalid-feedback">Please enter Team 2 name.</div>
              </div>
              <div class="mb-3">
                <label for="date" class="form-label">Date</label>
                <input 
                  type="date" 
                  id="date" 
                  name="date" 
                  class="form-control" 
                  value="<%= match.date.toISOString().split('T')[0] %>"
                  required 
                />
                <div class="invalid-feedback">Please select a date for the match.</div>
              </div>
              <div class="mb-3">
                <label for="venue" class="form-label">Venue</label>
                <input 
                  type="text" 
                  id="venue" 
                  name="venue" 
                  value="<%= match.venue %>" 
                  class="form-control" 
                  placeholder="Enter match venue" 
                  required 
                />
                <div class="invalid-feedback">Please enter the match venue.</div>
              </div>                                  

              <div class="mb-3">
                <label for="team1Probable" class="form-label">Team 1 Squad</label>
                <textarea 
                  id="team1Squad" 
                  name="team1Squad" 
                  class="form-control" 
                  rows="3" 
                  placeholder="Enter players separated by commas" 
                  required
                ><%= match.team1Squad %></textarea>
                <div class="invalid-feedback">Please provide the Squad for Team 1.</div>
              </div>
              <div class="mb-3">
                <label for="team2Probable" class="form-label">Team 2 Squad</label>
                <textarea 
                  id="team2Squads" 
                  name="team2Squads" 
                  class="form-control" 
                  rows="3" 
                  placeholder="Enter players separated by commas" 
                  required
                ><%= match.team2Squads %></textarea>
                <div class="invalid-feedback">Please provide Squad for Team 2.</div>
              </div>
              <button type="submit" class="btn btn-success w-100">Update Match</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <%- include('partials/admin_footer', { year: new Date().getFullYear() }) %>

    <style>
      body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
        overflow-x: hidden;
      }
      .content {
        flex: 1;
        overflow-y: auto;
      }
      .form-container {
        max-height: 80vh;
        overflow-y: auto;
      }
    </style>

    <script>
      // Bootstrap validation script
      (() => {
        'use strict';
        const forms = document.querySelectorAll('.needs-validation');
        Array.from(forms).forEach((form) => {
          form.addEventListener('submit', (event) => {
            if (!form.checkValidity()) {
              event.preventDefault();
              event.stopPropagation();
            }
            form.classList.add('was-validated');
          }, false);
        });
      })();
    </script>
  
  </body>
</html>